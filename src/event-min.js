(function(){var e={};var n={};var t={};function s(e){var n,t,s;if(arguments.length<3){throw new Error("Parameter error: at least 3 parameters needed!")}else{n=arguments[1];if(arguments[3]){t=arguments[2];s=arguments[3];a(e,n,t,s)}else{s=arguments[2];i(e,n,s)}}}function r(e){var n,t,s;n=arguments[1];if(arguments.length>3){t=arguments[2];s=arguments[3];f(e,n,t,s)}else{s=arguments[2];l(e,n,s);if(!s){f(e,n)}}}function i(e,n,t){if(!e.events||!e.events[n]){c(e,n)}e.events[n].push(t)}function l(e,n,t){if(!e.events){return}if(t){if(e.events[n]){for(var s=0,r=e.events[n].length;s<r;s++){if(e.events[n][s]===t){e.events[n].splice(s,1);break}}}}else if(n){if(e.events[n]){e.events[n].length=0}}else{for(var s in e.events){if(e.events[s]){e.events[s].length=0}}}}function a(e,n,t,s){c(e,n);e.delegs[n].push({deleQuery:t,handle:s,wrapHandle:function(n){var r=n||window.event,i=r.target||r.srcElement,l=e.querySelectorAll(t);i=i||this;for(var a=0,f=l.length;a<f;a++){if(m(l[a],i)){s.apply(l[a],arguments);break}}}})}function f(e,n,t,s){if(!e.delegs){return}if(s){if(e.delegs[n]){for(var r=0,i=e.delegs[n].length;r<i;r++){if(e.delegs[n][r].deleQuery===t&&e.delegs[n][r].handle===s){e.delegs[n].splice(r,1);break}}}}else if(n){if(e.delegs[n]){e.delegs[n].length=0}}else{for(var r in e.delegs){e.delegs[r].length=0}}}function u(e,n){s(t,e,n)}function o(e,n){r(t,e,n)}function d(e,n){g(t,e,n)}function g(e,n,t){while(e){v(e,n,t);e=e.parentNode}}function v(e,n,t){var s,r;if(!t||!t.target){t=p(t,{target:e,type:n})}if(e.delegs&&e.delegs[n]){for(s=0,r=e.delegs[n].length;s<r;s++){e.delegs[n][s].wrapHandle.call(e,t)}}if(e.events&&e.events[n]){for(s=0,r=e.events[n].length;s<r;s++){e.events[n][s].call(e,t)}}}function c(e,t){var s,r;s=e.delegs&&e.events;e.delegs=e.delegs||{};e.delegs[t]=e.delegs[t]||[];e.events=e.events||{};e.events[t]=e.events[t]||[];e.special=e.special||{};r=t in e.special;if(!s){if("on"+t in e){h(e,t,function(){var n,s;for(n=0,s=e.delegs[t].length;n<s;n++){e.delegs[t][n].wrapHandle.apply(e,arguments)}for(n=0,s=e.events[t].length;n<s;n++){e.events[t][n].apply(e,arguments)}})}}else if(!r&&n[t]){n[t](e);e.special[t]=true}}function p(e,n){if(typeof e!=="object"){e={}}for(var t in n){try{e[t]=n[t]}catch(s){}}return e}function h(e,n,t){if(e.addEventListener)e.addEventListener(n,t,false);else if(e.attachEvent){e.attachEvent("on"+n,t)}}function m(e,n){if(e===n){return true}if(e.contains){if(e.nodeType===9)return true;return e.contains(n)}else if(e.compareDocumentPosition){return!!(e.compareDocumentPosition(n)&16)}while(n=n.parentNode){if(e===n)return true}return false}e._addEvent=h;e._dispatch=v;e.on=s;e.off=r;e.bind=i;e.unbind=l;e.delegate=a;e.undelegate=f;e.subscribe=u;e.unsubscribe=o;e.publish=d;e.trigger=g;e.special=n;if(typeof module!=="undefined"&&module.exports&&this.module!==module){module.evt=e}else if(typeof define==="function"&&define.amd){define(e)}else{window.evt=e}})();